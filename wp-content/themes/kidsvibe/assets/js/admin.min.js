jQuery(document).ready(function(l){function e(){l(".widget_multi_input").each(function(){var e,i=l(this),t=i.find(".widget_multi_value_field").val();0<t.length&&(e=t.split("|"),i.find(".widget_multi_fields").empty(),i.parents(".widget_multi_input"),l.each(e,function(e,t){i.find(".widget_multi_fields").append('<div class="set"><input type="text" value="'+t+'" class="widget_multi_single_field" /><span class="widget_multi_remove_field"><span class="dashicons dashicons-no-alt"></span></span></div>')}))})}function n(e){var t="";e.find(".widget_multi_fields .widget_multi_single_field").each(function(){t+=l(this).val()+"|"}),e.find(".widget_multi_value_field").val(t.slice(0,-1)).change()}function t(){l(".content-type").on("change",function(){var e=l(this),t=e.parent().parent(),i=t.find(".block"),n=t.find("."+e.val());i.removeClass("block").addClass("none"),n.removeClass("none").addClass("block")})}function i(){l(".kidsvibe-widget-chosen-select").chosen({width:"100%"})}l(document).on("click",".widget_multi_add_field",function(e){var t=l(e.currentTarget);e.preventDefault();var i=t.parents(".widget_multi_input");i.find(".widget_multi_fields").append('<div class="set"><input type="text" value="" class="widget_multi_single_field" /><span class="widget_multi_remove_field"><span class="dashicons dashicons-no-alt"></span></span></div>'),n(i)}).on("change",".widget_multi_single_field",function(){n(l(this).parents(".widget_multi_input"))}).on("click",".widget_multi_remove_field",function(e){e.preventDefault();var t=l(this),i=t.parents(".widget_multi_input");t.parent().remove(),n(i)}),e(),l(document).on("click",".kidsvibe-accordion",function(e){e.preventDefault(),l(this).next(".kidsvibe-panel").slideToggle()}),l(document).on("click",".upload_image_button",function(e){e.preventDefault();var t=l(this),i=wp.media.frames.file_frame=wp.media({title:"Select or upload image",library:{type:"image"},button:{text:"Select"},multiple:!1});i.on("select",function(){var e=i.state().get("selection").first().toJSON();t.prev("input").val(e.url)}),i.open()}),t(),i(),l(".kidsvibe-icon-picker").each(function(){l(this).iconpicker("#"+this.id)}),l(document).on("widget-updated widget-added",function(){l(".kidsvibe-icon-picker").each(function(){l(this).iconpicker("#"+this.id)}),i(),t(),e()})});